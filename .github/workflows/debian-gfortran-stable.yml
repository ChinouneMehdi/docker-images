name: Stable

on:
  push:
    paths:
      - 'debian-gfortran/stable/*'
  schedule:
    - cron: '0 0 * * 1'

env:
  dockerId: chinoune
  imageName: debian-gfortran-testing
  tag: stable
  code: ${{ secrets.DockerPassword }}

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build the Docker image
      run: |
        cd debian-gfortran/stable
        docker build -t $dockerId/$imageName:$tag .
        docker login -u $dockerId -p $code
        docker push $dockerId/$imageName:$tag